<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	    <meta name="description" content="Scoring">
	    <meta name="author" content="Gian Roi Calvario">
	    <title>GPMS</title>
	    <link rel="icon" href="img/icon.png"/>
		<link rel="stylesheet" href="dist/css/bootstrap.min.css"/>
	    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	    <script src="dist/js/jquery-3.1.1.min.js"></script>
	    <style>
	    	@font-face {
	    		font-family: 'team';
	    		src: url('dist/fonts/university.otf');
	    	}
	    	@font-face {
	    		font-family: 'game';
	    		src: url('dist/fonts/segmental.ttf');
	    	}
	    	@font-face {
	    		font-family: 'score';
	    		src: url('dist/fonts/Scoreboard.ttf');
	    	}
	    	body {
	    		padding-top: 45px;
	    		padding-left: 15px;
	    		padding-right: 15px;
	    		background: url('dist/img/bg.png');
	    		background-repeat: no-repeat;
    			background-size: cover;
    			color: black;
	    	}
	    	.board {
	    		margin-top: 5%;
	    		background: rgba(255, 255, 255, 1);
	    		padding: 10px;
	    	}
	    	table td, th{
	    		border: 1px solid black !important;
	    	}
	    	table th {
	    		font-family: 'Arial';
	    		font-size: 24pt;
	    		text-align: center;
	    	}
	    	label {
	    		font-family: 'team';
	    		font-size: 18pt;
	    	}
	    	.team-name {
	    		font-size: 24pt;
	    		font-family: 'team';
	    		width: 20%;
	    	}
	    	.score {
	    		font-size: 24pt;
	    		font-family: 'score';
	    		text-align: center;
	    		color: red;
	    	}
	    	.score input {
	    		width: 70px;
	    	}
	    	.title {
	    		/*background-color: #eeeeee;*/
	    	}
	    	.game {
	    		/*background-color: #42a5f5;*/
	    	}
	    	.plan {
	    		/*background-color: #66bb6a;*/
	    	}
	    	.marketing {
	    		/*background-color: #ff4081;*/
	    	}
	    	.solutions {
	    		/*background-color: #ffee58;*/
	    	}
	    </style>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12 board">
					<table class="table table-bordered">
						<label>Scoreboard:</label>
					    <thead>
					      <tr class="title">
					        <th></th>
					        <th>1</th>
					        <th>2</th>
					        <th>3</th>
					        <th>4</th>
					        <th>5</th>
					        <th>6</th>
					        <th>7</th>
					        <th>8</th>
					        <th>9</th>
					        <th>10</th>
					        <th>TOTAL</th>
					      </tr>
					    </thead>
					    <tbody>
					      <tr class="game">
					        <td class="team-name">GAME</td>
					        <td class="score"><input type="number" value="0" id="g_0" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_1" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_2" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_3" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_4" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_5" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_6" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_7" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_8" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="g_9" onkeyup="scoreCompute('game', this.value)" /></td>
					        <td class="score" id="g_total">0</td>
					      </tr>
					      <tr class="plan">
					        <td class="team-name">PLAN</td>
					        <td class="score"><input type="number" value="0" id="p_0" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_1" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_2" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_3" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_4" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_5" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_6" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_7" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_8" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="p_9" onkeyup="scoreCompute('plan', this.value)" /></td>
					        <td class="score" id="p_total">0</td>
					      </tr>
					      <tr class="marketing">
					        <td class="team-name">MARKETING</td>
					        <td class="score"><input type="number" value="0" id="m_0" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_1" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_2" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_3" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_4" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_5" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_6" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_7" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_8" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="m_9" onkeyup="scoreCompute('marketing', this.value)" /></td>
					        <td class="score" id="m_total">0</td>
					      </tr>
					      <tr class="solutions">
					        <td class="team-name">SOLUTIONS</td>
					        <td class="score"><input type="number" value="0" id="s_0" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_1" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_2" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_3" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_4" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_5" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_6" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_7" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_8" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score"><input type="number" value="0" id="s_9" onkeyup="scoreCompute('solutions', this.value)" /></td>
					        <td class="score" id="s_total">0</td>
					      </tr>
					    </tbody>
					  </table>
				</div>
			</div>
		</div>
		<script>
			function scoreCompute (team, value) {
				if (value) {
					if (team == 'game') {
						var total = 0;
						var temp_total = 0;
						for (var i = 0; i < 9; i+=2) {
							var value_1 = document.getElementById('g_' + i).value;
							var value_2 = document.getElementById('g_' + (i + 1)).value;
							console.log (value_1 + ' - ' + value_2);

							temp_total = temp_total + (parseInt(value_1) + parseInt(value_2));
							if (i == 8) {
								total = temp_total;
							}
						}
						document.getElementById('g_total').innerHTML = total;
						console.log(total);
					} else if (team == 'plan') {
						var total = 0;
						var temp_total = 0;
						for (var i = 0; i < 9; i+=2) {
							var value_1 = document.getElementById('p_' + i).value;
							var value_2 = document.getElementById('p_' + (i + 1)).value;
							console.log (value_1 + ' - ' + value_2);

							temp_total = temp_total + (parseInt(value_1) + parseInt(value_2));
							if (i == 8) {
								total = temp_total;
							}
						}
						document.getElementById('p_total').innerHTML = total;
						console.log(total);
					} else if (team == 'marketing') {
						var total = 0;
						var temp_total = 0;
						for (var i = 0; i < 9; i+=2) {
							var value_1 = document.getElementById('m_' + i).value;
							var value_2 = document.getElementById('m_' + (i + 1)).value;
							console.log (value_1 + ' - ' + value_2);

							temp_total = temp_total + (parseInt(value_1) + parseInt(value_2));
							if (i == 8) {
								total = temp_total;
							}
						}
						document.getElementById('m_total').innerHTML = total;
						console.log(total);
					} else if (team == 'solutions') {
						var total = 0;
						var temp_total = 0;
						for (var i = 0; i < 9; i+=2) {
							var value_1 = document.getElementById('s_' + i).value;
							var value_2 = document.getElementById('s_' + (i + 1)).value;

							temp_total = temp_total + (parseInt(value_1) + parseInt(value_2));
							if (i == 8) {
								total = temp_total;
							}
						}
						document.getElementById('s_total').innerHTML = total;
					}
					sendData();
				}
			}

			function sendData() {
				var data = [
								{
									g0: document.getElementById('g_0').value,
									g1: document.getElementById('g_1').value,
									g2: document.getElementById('g_2').value,
									g3: document.getElementById('g_3').value,
									g4: document.getElementById('g_4').value,
									g5: document.getElementById('g_5').value,
									g6: document.getElementById('g_6').value,
									g7: document.getElementById('g_7').value,
									g8: document.getElementById('g_8').value,
									g9: document.getElementById('g_9').value,
									total: document.getElementById('g_total').innerHTML
								}, 
								{
									p0: document.getElementById('p_0').value,
									p1: document.getElementById('p_1').value,
									p2: document.getElementById('p_2').value,
									p3: document.getElementById('p_3').value,
									p4: document.getElementById('p_4').value,
									p5: document.getElementById('p_5').value,
									p6: document.getElementById('p_6').value,
									p7: document.getElementById('p_7').value,
									p8: document.getElementById('p_8').value,
									p9: document.getElementById('p_9').value,
									total: document.getElementById('p_total').innerHTML
								},
								{
									m0: document.getElementById('m_0').value,
									m1: document.getElementById('m_1').value,
									m2: document.getElementById('m_2').value,
									m3: document.getElementById('m_3').value,
									m4: document.getElementById('m_4').value,
									m5: document.getElementById('m_5').value,
									m6: document.getElementById('m_6').value,
									m7: document.getElementById('m_7').value,
									m8: document.getElementById('m_8').value,
									m9: document.getElementById('m_9').value,
									total: document.getElementById('m_total').innerHTML
								},
								{
									s0: document.getElementById('s_0').value,
									s1: document.getElementById('s_1').value,
									s2: document.getElementById('s_2').value,
									s3: document.getElementById('s_3').value,
									s4: document.getElementById('s_4').value,
									s5: document.getElementById('s_5').value,
									s6: document.getElementById('s_6').value,
									s7: document.getElementById('s_7').value,
									s8: document.getElementById('s_8').value,
									s9: document.getElementById('s_9').value,
									total: document.getElementById('s_total').innerHTML
								}
							];

				$.ajax ({
					method: 'POST',
					url: '/score',
					data: {
						data: JSON.stringify(data)
					},
					success: function (res) {
						console.log(res);
					}
				});
			}

			var scoreData = {};

			function getData () {
				$.ajax ({
					method: 'GET',
					url: '/score',
					success: function (res) {
						scoreData = res;
						displayData();
					}
				});
			}

			function displayData () {
				document.getElementById('g_0').value = scoreData[0].g0;
				document.getElementById('g_1').value = scoreData[0].g1;
				document.getElementById('g_2').value = scoreData[0].g2;
				document.getElementById('g_3').value = scoreData[0].g3;
				document.getElementById('g_4').value = scoreData[0].g4;
				document.getElementById('g_5').value = scoreData[0].g5;
				document.getElementById('g_6').value = scoreData[0].g6;
				document.getElementById('g_7').value = scoreData[0].g7;
				document.getElementById('g_8').value = scoreData[0].g8;
				document.getElementById('g_9').value = scoreData[0].g9;
				document.getElementById('g_total').innerHTML = scoreData[0].total;

				document.getElementById('p_0').value = scoreData[1].p0;
				document.getElementById('p_1').value = scoreData[1].p1;
				document.getElementById('p_2').value = scoreData[1].p2;
				document.getElementById('p_3').value = scoreData[1].p3;
				document.getElementById('p_4').value = scoreData[1].p4;
				document.getElementById('p_5').value = scoreData[1].p5;
				document.getElementById('p_6').value = scoreData[1].p6;
				document.getElementById('p_7').value = scoreData[1].p7;
				document.getElementById('p_8').value = scoreData[1].p8;
				document.getElementById('p_9').value = scoreData[1].p9;
				document.getElementById('p_total').innerHTML = scoreData[1].total;

				document.getElementById('m_0').value = scoreData[2].m0;
				document.getElementById('m_1').value = scoreData[2].m1;
				document.getElementById('m_2').value = scoreData[2].m2;
				document.getElementById('m_3').value = scoreData[2].m3;
				document.getElementById('m_4').value = scoreData[2].m4;
				document.getElementById('m_5').value = scoreData[2].m5;
				document.getElementById('m_6').value = scoreData[2].m6;
				document.getElementById('m_7').value = scoreData[2].m7;
				document.getElementById('m_8').value = scoreData[2].m8;
				document.getElementById('m_9').value = scoreData[2].m9;
				document.getElementById('m_total').innerHTML = scoreData[2].total;

				document.getElementById('s_0').value = scoreData[3].s0;
				document.getElementById('s_1').value = scoreData[3].s1;
				document.getElementById('s_2').value = scoreData[3].s2;
				document.getElementById('s_3').value = scoreData[3].s3;
				document.getElementById('s_4').value = scoreData[3].s4;
				document.getElementById('s_5').value = scoreData[3].s5;
				document.getElementById('s_6').value = scoreData[3].s6;
				document.getElementById('s_7').value = scoreData[3].s7;
				document.getElementById('s_8').value = scoreData[3].s8;
				document.getElementById('s_9').value = scoreData[3].s9;
				document.getElementById('s_total').innerHTML = scoreData[3].total;
			}

			window.onload = function () {
				getData();
			}
		</script>
	</body>
</html>